## 제어의 역전(IOC)

- UserDao의 생성 책임을 맡은 팩토리 클래스를 만듬
- UserDaoTest 이제 UserDao가 어떻게 만들어지는지 어떻게 초기화되어 있는지 신경 쓰지 않고 팩토리로부터 UserDao를 받아 사용함 → 각각이 자신의 책임만 충실하도록 분리
- 제어의 역전 : 프로그램의 제어 흐름 구조가 뒤바뀌는 것
- 모든 오브젝트가 능동적으로 자신이 사용할 클래스를 결정 → 모든 종류의 작업을 사용하는 쪽에서 제어하는 구조 → 이런 제어의 흐름을 꺼꾸로 뒤집는것을 제어의 역전이라고함
- 대표적인 IoC 적용 예: 프레임워크
  - 라이브러리: 개발자가 호출 → 능동적
  - 프레임워크: 프레임워크가 개발자 코드를 호출 → 수동적 제어 흐름 = IoC

## 스프링의 IoC

- 빈
  - 스프링이 IoC 방식으로 관리하는 오브젝트
  - 스프링이 직접 생성과 제어를 담당하는 오브젝트
- 빈 팩토리
  - 스프링의 IoC를 담당하는 핵심 컨테이너
  - 빈 등록, 생성, 조회 등 관리하는 기능
  - 보통 빈 팩토리 그 자체를 이용하기 보다는 빈팩토리를 확장한 애플리케이션 컨텍스트를 이용
- 애플리케이션 컨텍스트
  - 빈 팩토리를 확장한 IoC 컨테이너
  - 빈팩토리 기능에서 각종 서비스를 추가해 제공한다.
  - 빈 팩토리라 부를 때는 빈생성과 제어 관점에서 , 애플리케이션 컨텍스트라고 할 때는 스프링이 제공하는 애플리케이션 지원 기능을 모두 포함해서 이야기함
- 설정정보/설정 메타정보
  - 애플리케이션 컨텍스트 또는 빈 팩토리가 IoC를 적용하기 위해 사용하는 메타 정보
- 동작 예시
  - 개발자는 @Bean 메서드가 있는 @Configuration 클래스(DaoFactory)를 등록
  - ApplicationContext는 이를 읽고, @Bean이 붙은 메서드의 리턴 객체를 빈으로 관리
  - 클라이언트는 ApplicationContext.getBean("userDao") 로 객체를 얻어 사용
  - 객체 생성 방식, 시점, 주기까지 스프링이 제어
